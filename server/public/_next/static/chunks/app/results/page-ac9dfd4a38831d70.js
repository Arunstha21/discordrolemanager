(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{2275:function(e,t,a){Promise.resolve().then(a.bind(a,6812))},6812:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(7437),d=a(2265);function l(){return(0,r.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-white text-3xl font-semibold mb-4 animate-pulse",children:"Loading..."}),(0,r.jsx)("div",{className:"w-20 h-20 border-t-4 border-b-4 border-white rounded-full animate-spin"})]})})}let c="http://localhost:3001";function o(){let[e,t]=(0,d.useState)(!1),[a,o]=(0,d.useState)(""),[n,s]=(0,d.useState)([]),[i,b]=(0,d.useState)([]),[h,x]=(0,d.useState)(""),[m,u]=(0,d.useState)({}),k=()=>{setTimeout(()=>{o("")},6e3)};function p(e,t){let a;if(e.hasAttribute("data-title-listeners"))return;e.classList.remove("border","border-gray-300");let r=e.querySelector("div");r.classList.add("hidden");let d=e.querySelector("label"),l=d.textContent;d.textContent="".concat(l,": ").concat(t),e.addEventListener("mouseenter",function(t){clearTimeout(a),a=setTimeout(()=>{e.classList.add("border","border-gray-300"),r.classList.remove("hidden"),d.textContent=l},90)}),e.addEventListener("mouseleave",function(c){clearTimeout(a),a=setTimeout(()=>{e.classList.remove("border","border-gray-300"),r.classList.add("hidden"),d.textContent="".concat(l,": ").concat(t)},0)}),e.setAttribute("data-title-listeners","true")}(0,d.useEffect)(()=>{y()},[]);let y=async()=>{try{t(!0);let r=await fetch("".concat(c,"/api/pmgo/gesData"),{method:"GET",headers:{"Content-Type":"application/json"}}),d=document.getElementById("stage"),l=document.getElementById("group"),n=document.getElementById("match"),s=document.getElementById("eventDiv"),i=document.getElementById("stageDiv"),b=document.getElementById("groupDiv"),h=document.getElementById("statsDiv"),x=document.getElementById("matchDiv"),m=document.getElementById("teamListDiv");function e(e){let t=[s,i,b,x,h,m],a=t.indexOf(e);-1!==a&&t.slice(a+1).forEach(e=>{e.classList.add("hidden")}),function(){let e=document.querySelector("tbody"),t=document.querySelector("thead");null!=e&&(t.innerHTML="",e.innerHTML="")}()}if(r.ok){o("Data Retrieved !!");let{stage:s,group:k}=(await r.json()).gesData,y=[],w=[],E=s.filter(e=>"67f33ecb11f6c75277a0d56c"===e.event);E.forEach(e=>{let t='<button class="hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 text-nowrap rounded" value="'.concat(e._id,'" name="').concat(e.event,'">').concat(e.name,"</button>");y.push(t)});let L=['<button class="hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 text-nowrap rounded" value="overall" name="overall">Overall</button>',...y];t(!1),d.innerHTML=L.join(""),k.forEach(e=>{let t='<button class="hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 text-nowrap rounded" value="'.concat(e._id,'" name="').concat(e.stage,'">').concat(e.name,"</button>");w.push(t)}),d.addEventListener("click",function(t){d.querySelectorAll("button").forEach(e=>e.classList.remove("bg-gray-700","text-white"));let r=t.target,c=r.value,o=r.textContent,n=s.find(e=>e._id===c);r.classList.add("bg-gray-700","text-white"),u(e=>({...e,stage:o})),p(i,o),e(i);let h=k.reduce((e,t)=>(t.stage===c&&(e[t._id]=t.matches),e),{});if("overall"===c){let e=[];E.forEach(t=>{e.push(t._id)}),a(e,"Overall")}else if("Multiple"===n.groupType)a(c,"Multiple");else if("Individual"===n.groupType){let e=Object.entries(h).filter(e=>{let[t,a]=e;return a.length>0}).map(e=>{let[t,a]=e;return t});if(e.length>0){let t=w.filter(t=>e.some(e=>t.includes('value="'.concat(e,'"'))));b.classList.remove("hidden"),l.innerHTML=t.join("")}}});let N=[];async function a(a,r){l.querySelectorAll("button").forEach(e=>e.classList.remove("bg-gray-700","text-white")),e(b);try{t(!0);let e=await fetch("".concat(c,"/api/pmgo/gesData"),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let{matchData:d}=(await e.json()).gesData;if("Overall"===r)a.forEach(e=>{let t=k.filter(t=>t.stage===e),a=new Set;t.forEach(e=>{e.matches.forEach(e=>a.add(e))}),N=N.concat(d.filter(e=>a.has(e.id)))});else if("Multiple"===r){let e=k.filter(e=>e.stage===a),t=new Set;e.forEach(e=>{e.matches.forEach(e=>t.add(e))}),N=d.filter(e=>t.has(e.id))}else"Individual"===r&&(N=d.filter(e=>e.groupId[0]===a));let l=N.map(e=>'<button class="hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 text-nowrap rounded" value="'.concat(e.id,'">Match ').concat(e.matchNo,"</button>"));l.sort((e,t)=>{let a=e.match(/Match (\d+)/)[1],r=t.match(/Match (\d+)/)[1];return a-r});let c=['<button class="hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 rounded" value="Overall">Overall</button>',...l];x.classList.remove("hidden"),t(!1),n.innerHTML=c.join("")}}catch(e){console.log(e)}}l.addEventListener("click",async function(e){let t=e.target,r=t.value,d=t.textContent;a(r,"Individual"),p(b,d),t.classList.add("bg-gray-700","text-white")}),document.getElementById("mvpStats").addEventListener("click",async function(e){let a=N.map(e=>e.id);try{t(!0);let e=await fetch("".concat(c,"/api/pmgo/topTenMvps"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchIds:a})});if(e.ok){let a=(await e.json()).playerResult;t(!1),v(a,!0)}}catch(e){console.log("error: ".concat(e))}}),n.addEventListener("click",async function(a){n.querySelectorAll("button").forEach(e=>e.classList.remove("bg-gray-700","text-white"));let r=a.target,d=r.value,l=r.textContent;if(u(e=>({...e,match:l})),e(x),p(x,l),r.classList.add("bg-gray-700","text-white"),h.classList.remove("hidden"),"Overall"===d){let e=N.map(e=>e.id);s(e)}else try{t(!0);let e=await fetch("".concat(c,"/api/pmgo/perMatchResults"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:d})});if(e.ok){let a=document.getElementById("stats"),r=document.getElementById("afterMatch"),l=await e.json(),c=l.result.playerResult,n=l.result.teamResult,i=document.getElementById("teamListDiv");t(!1),f(n),i.classList.add("hidden"),r.addEventListener("click",function(e){let t=N.findIndex(e=>e.id===d);-1===t&&o("Selected match ID not found in matches array.");let a=N.slice(0,t+1).map(e=>e.id);s(a)}),a.addEventListener("click",function(e){a.querySelectorAll("button").forEach(e=>e.classList.remove("bg-gray-700","text-white"));let t=e.target,r=t.value;t.classList.add("bg-gray-700","text-white"),"teamStats"===r?(f(n),i.classList.add("hidden")):"playerStats"===r&&(v(c),document.getElementById("teamList"),i.classList.remove("hidden"),g(n))}),teamList.addEventListener("change",function(e){let t=e.target.value;if("all"===t)v(c);else{let e=c.filter(e=>e.teamName===t);v(e)}})}}catch(e){console.log(e)}async function s(e){try{t(!0);let a=await fetch("".concat(c,"/api/pmgo/overallResults"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchIds:e})});if(u(t=>({...t,count:e.length})),a.ok){let e=document.getElementById("stats"),r=document.getElementById("teamList"),l=await a.json(),c=l.result.playerResult,o=l.result.teamResult;t(!1),f(o,"Overall"===d),m.classList.add("hidden"),e.addEventListener("click",function(t){e.querySelectorAll("button").forEach(e=>e.classList.remove("bg-gray-700","text-white"));let a=t.target,r=a.value;a.classList.add("bg-gray-700","text-white"),"teamStats"===r?(f(o,"Overall"===d),m.classList.add("hidden")):"playerStats"===r&&(v(c,"Overall"===d),m.classList.remove("hidden"),g(o))}),r.addEventListener("change",function(e){let t=e.target.value,a=c.filter(e=>e.teamName===t);v(a,"Overall"===d)})}}catch(e){console.log("error: ".concat(e))}}})}else console.error("Error:",r.status,r.statusText),o("Error: ".concat(r.status," ").concat(r.statusText));k()}catch(e){console.error("Error:",e.message),o("Error: ".concat(e.message)),k()}};function g(e){let t=['<option value="" selected>Select Match</option>',...e.map(e=>'<option value="'.concat(e.team,'">').concat(e.team,"</option>"))];teamList.innerHTML=t.join("")}function f(e,t){let a=document.querySelector("tbody"),r=document.querySelector("thead");null!==a&&(r.innerHTML="",a.innerHTML="");let d=[];d=t?["Rank","Team","Tag","Kills","Damage","Place Points","Total Points","WWCD","Match Count","Last Match Rank"]:["Rank","Team","Tag","Kills","Damage","Place Points","Total Points","WWCD","Match","Match Rank"];let l=document.createElement("tr");d.forEach(e=>{let t=document.createElement("th");t.textContent=e,t.className="border border-black bg-amber-400 text-black px-4 py-2",l.appendChild(t)}),e.forEach(e=>{let d=document.createElement("tr");t?d.innerHTML='\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">'.concat(e.cRank,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.team,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.tag,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.kill,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.damage,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.placePoint,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.totalPoint,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.wwcd,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.matchCount,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.lastMatchRank,"</td>\n            "):d.innerHTML='\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">'.concat(e.cRank,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.team,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.tag,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.kill,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.damage,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.placePoint,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.totalPoint,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.wwcd,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.match,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.rank,"</td>\n            "),r.appendChild(l),a.appendChild(d)}),b(d),s(e.map(e=>[e.cRank,e.team,e.tag,e.kill,e.damage,e.placePoint,null!==e.starterPoint?e.starterPoint:void 0,e.totalPoint,e.wwcd,e.matchCount||e.match,e.lastMatchRank||e.rank].filter(e=>void 0!==e))),w()}function v(e,t){let a=document.querySelector("tbody"),r=document.querySelector("thead");null!==a&&(r.innerHTML="",a.innerHTML="");let d=document.createElement("tr");t?["Rank","Team Name","In Game Name","UID","Kills","Damage","Survival Time","Assists","Heal","Head Shot","MVP Rating","MP"].forEach(e=>{let t=document.createElement("th");t.textContent=e,t.className="border border-black bg-amber-400 text-black px-4 py-2",d.appendChild(t)}):["Rank","Team Name","In Game Name","UID","Kills","Damage","Survival Time","Assists","Heal","Head Shot"].forEach(e=>{let t=document.createElement("th");t.textContent=e,t.className="border border-black bg-amber-400 text-black px-4 py-2",d.appendChild(t)}),e.forEach(e=>{let l=document.createElement("tr");t?l.innerHTML='\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">'.concat(e.cRank,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.teamName,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.inGameName,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.uId,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.kill,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.damage,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.survivalTime,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.assist,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.heal,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.headshot,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.mvp,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.matchPlayed,"</td>\n            "):l.innerHTML='\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">'.concat(e.cRank,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.teamName,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.inGameName,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.uId,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.kill,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.damage,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.survivalTime,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.assist,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.heal,'</td>\n                <td class="border dark:border-gray-400 dark:text-white border-black text-black px-2 py-1">').concat(e.headshot,"</td>\n            "),r.appendChild(d),a.appendChild(l)}),w()}function w(){document.querySelectorAll("th").forEach((e,t)=>{e.addEventListener("click",()=>{!function(e,t){let a=document.querySelector("tbody"),r=Array.from(a.querySelectorAll("tr")),d=e.getAttribute("data-order")||"asc";r.sort((e,a)=>{let r=e.querySelectorAll("td")[t].textContent.trim(),l=a.querySelectorAll("td")[t].textContent.trim(),c=isNaN(r)||isNaN(l)?r.localeCompare(l):r-l;return"asc"===d?c:-c}),a.innerHTML="",r.forEach(e=>a.appendChild(e)),d="asc"===d?"desc":"asc",e.setAttribute("data-order",d)}(e,t)})})}async function E(){if(0===n.length){o("No data to send");return}let e="".concat(m.stage," - ").concat("Overall"===m.match?"After Match ".concat(m.count):m.match),t="Overall"===m.match;try{(await fetch("".concat(c,"/api/sendResult"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tableData:n,headers:i,message:e,isOverall:t})})).ok&&x("Result sent")}catch(e){o("Error sending result")}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"body",className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row overflow-auto mt-2",children:[(0,r.jsxs)("div",{id:"stageDiv",className:"flex flex-col p-2 ml-8 border border-gray-300 rounded-lg",children:[(0,r.jsx)("label",{htmlFor:"stage",className:"underline",children:"Stage"}),(0,r.jsx)("div",{id:"stage",className:"flex flex-row overflow-x-auto no-scrollbar"})]}),(0,r.jsxs)("div",{id:"groupDiv",className:"flex flex-col p-2 ml-4 border border-gray-300 rounded-lg hidden",children:[(0,r.jsx)("label",{htmlFor:"group",className:"underline",children:"Group"}),(0,r.jsx)("div",{id:"group",className:"flex flex-row overflow-x-auto no-scrollbar"})]})]}),(0,r.jsxs)("div",{id:"matchDiv",className:"flex flex-col mt-2 p-2 ml-8 border border-gray-300 rounded-lg hidden",children:[(0,r.jsx)("label",{htmlFor:"match",className:"underline",children:"Match"}),(0,r.jsx)("div",{id:"match",className:"flex flex-row overflow-x-auto no-scrollbar"})]}),(0,r.jsxs)("div",{className:"flex flex-row overflow-auto mt-2",children:[(0,r.jsxs)("div",{id:"statsDiv",className:"flex flex-col p-2 ml-8 border border-gray-300 rounded-lg hidden",children:[(0,r.jsx)("label",{htmlFor:"stats",className:"underline",children:"Stats"}),(0,r.jsxs)("div",{id:"stats",className:"flex flex-row overflow-x-auto no-scrollbar",children:[(0,r.jsx)("button",{id:"afterMatch",value:"afterMatch",className:"hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 rounded",children:"After Match"}),(0,r.jsx)("button",{value:"teamStats",className:"hover:bg-gray-700 hover:text-white bg-gray-700 text-white mx-1 py-2 px-4 rounded",children:"Team Stats"}),(0,r.jsx)("button",{value:"playerStats",className:"hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 rounded",children:"Player Stats"}),(0,r.jsx)("button",{id:"mvpStats",value:"mvpStats",className:"hover:bg-gray-700 hover:text-white py-2 mx-1 px-4 rounded",children:"Top 10 MVP Stats"})]})]}),(0,r.jsxs)("div",{id:"teamListDiv",className:"flex flex-col p-2 ml-8 border border-gray-300 rounded-lg hidden",children:[(0,r.jsx)("label",{htmlFor:"teamList",children:"Team List"}),(0,r.jsx)("select",{id:"teamList",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:(0,r.jsx)("option",{value:"all",children:"Select Team"})})]})]})]}),(0,r.jsx)("h5",{className:"mt-4",children:a}),e?(0,r.jsx)(l,{}):(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"overflow-auto text-center",children:[(0,r.jsx)("div",{className:" p-3 py-8",children:(0,r.jsxs)("table",{className:"table-auto dark:bg-black bg-white border-collapse border border-black w-42 mx-auto",children:[(0,r.jsx)("thead",{}),(0,r.jsx)("tbody",{})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:E,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4",children:"Send Result"}),h&&(0,r.jsx)("p",{className:"text-green-500",children:h})]})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2275)}),_N_E=e.O()}]);